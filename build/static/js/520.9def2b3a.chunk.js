(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[520],{3257:function(e,t,a){"use strict";a.r(t);var n=a(9),l=a(25),r=a(27),c=a(1),o=a.n(c),i=a(912),u=a(904),m=a(905),s=a(245),d=a(916),v=a(906),p=a(907),E=a(908),b=a(894),f=(a(235),a(136)),g=a.n(f),y=(a(233),a(44)),O=a(85),N=[],j=[];t.default=function(e){var t=Object(c.useState)(""),a=Object(r.a)(t,2),f=(a[0],a[1]),h=Object(c.useState)(""),S=Object(r.a)(h,2),P=S[0],I=S[1],q=Object(c.useState)(""),D=Object(r.a)(q,2),C=D[0],M=D[1],_=Object(c.useState)(""),J=Object(r.a)(_,2),R=J[0],k=(J[1],Object(c.useState)([])),T=Object(r.a)(k,2),w=T[0],x=T[1],A=Object(c.useState)([]),Q=Object(r.a)(A,2),B=(Q[0],Q[1],Object(c.useState)("")),F=Object(r.a)(B,2),L=F[0],V=F[1],G=Object(c.useState)(0),z=Object(r.a)(G,2),H=(z[0],z[1]),K=Object(c.useState)(0),U=Object(r.a)(K,2),W=U[0],X=U[1],Y=Object(c.useState)({}),Z=Object(r.a)(Y,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ae=Object(r.a)(te,2),ne=(ae[0],ae[1],Object(c.useState)([])),le=Object(r.a)(ne,2),re=le[0],ce=le[1],oe=Object(c.useState)([{product:"",productId:"",IncrementPercent:"",IncrementMonth:"",availableQty:"",qty:1,price:"",totalprice:"",Salespersonname:"",targetstartDate:"",targetEndDate:""}]),ie=Object(r.a)(oe,2),ue=ie[0],me=ie[1],se=function(e,t){f(t);var a=e.target,n=a.name,r=a.value,c=Object(l.a)(ue);c[t][n]=r;var o=0;c.length>0&&(o=(null===c||void 0===c?void 0:c.map((function(e){return N[t]=e.qty*e.price,c[t].totalprice=e.qty*e.price,e.qty*e.price}))).reduce((function(e,t){return e+t})));me(c),X(o)},de=function(e,t,a){j.splice(a,1);var n=(null===ue||void 0===ue?void 0:ue.map((function(e,n){var l,r;console.log((null===e||void 0===e?void 0:e.qty)*(null===(l=t[n])||void 0===l?void 0:l.Product_MRP));var c=(null===e||void 0===e?void 0:e.qty)*(null===(r=j[n])||void 0===r?void 0:r.Product_MRP);return N[a]=c,c}))).reduce((function(e,t){return e+t}));X(n||0)},ve=function(e,t,a){j.push(t),me((function(e){var r=Object(l.a)(e),c=Object(n.a)({},r[a]);c.price=null===t||void 0===t?void 0:t.Product_MRP,c.productId=null===t||void 0===t?void 0:t._id,r[a]=c;var o=(null===e||void 0===e?void 0:e.map((function(e,t){var n,l=(null===e||void 0===e?void 0:e.qty)*(null===(n=j[t])||void 0===n?void 0:n.Product_MRP);return N[a]=l,l}))).reduce((function(e,t){return e+t}));return X(o),c.totalprice=o,r}));var r=Object(l.a)(ue).map((function(e){e.totalprice}));H(r)};Object(c.useEffect)((function(){JSON.parse(localStorage.getItem("userData"));var e=JSON.parse(localStorage.getItem("userData"));Object(y.l)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){ce(null===e||void 0===e?void 0:e.Customer)})).catch((function(e){return console.log(e)}));var t=JSON.parse(localStorage.getItem("userData"));Object(y.Nb)(null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.database).then((function(e){x(null===e||void 0===e?void 0:e.Product)})).catch((function(e){console.log(e)}))}),[]),Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));ee(e)}),[]);var pe=function(){me([].concat(Object(l.a)(ue),[{product:"",productId:"",availableQty:"",IncrementPercent:"",IncrementMonth:"",qty:1,price:"",totalprice:"",Salespersonname:"",targetstartDate:"",targetEndDate:""}]))},Ee=function(e){var t=Object(l.a)(ue);t.splice(e,1),N.splice(e,1);var a=N.reduce((function(e,t){return e+t}));X(a),me(t)};return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(i.a,null,o.a.createElement(u.a,{className:"m-2"},o.a.createElement(m.a,{className:""},o.a.createElement("div",null,o.a.createElement("h1",{className:""},"Create Target"))),o.a.createElement(m.a,null,o.a.createElement("div",{className:"float-right"},o.a.createElement(O.b,{render:function(e){var t=e.history;return o.a.createElement(s.a,{style:{cursor:"pointer"},className:"float-right mr-1",color:"primary",onClick:function(){return t.goBack()}},"Back")}})))),o.a.createElement(d.a,null,o.a.createElement(v.a,{className:"m-1",onSubmit:function(e){e.preventDefault();var t=null===ue||void 0===ue?void 0:ue.map((function(e,t){return{productId:null===e||void 0===e?void 0:e.productId,qtyAssign:Number(null===e||void 0===e?void 0:e.qty),price:null===e||void 0===e?void 0:e.price,totalPrice:null===e||void 0===e?void 0:e.totalprice,assignPercentage:[{month:null===e||void 0===e?void 0:e.IncrementMonth,percentage:Number(null===e||void 0===e?void 0:e.IncrementPercent)}]}}));if(null===L||void 0===L?void 0:L._id){var a={startDate:P,endDate:C,grandTotal:W,partyId:null===L||void 0===L?void 0:L._id,products:t,created_by:null===$||void 0===$?void 0:$._id};R?swal("Error occured while Entering Details"):Object(y.J)(a).then((function(e){swal("Target Created Successfully")})).catch((function(e){console.log(e)}))}else swal("Error","Choose Sales Person First")}},o.a.createElement(u.a,null,o.a.createElement(m.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Choose Party"),o.a.createElement(g.a,{required:!0,selectionLimit:1,isObject:"false",options:re,onSelect:function(e,t){V(t)},onRemove:function(e,t,a){console.log(e)},displayValue:"firstName"}))),o.a.createElement(m.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Start date"),o.a.createElement(E.a,{required:!0,type:"date",name:"targetEndDate",value:P,onChange:function(e){return I(e.target.value)}}))),o.a.createElement(m.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"End Date"),o.a.createElement(E.a,{required:!0,type:"date",name:"targetstartDate",value:C,onChange:function(e){return M(e.target.value)}})))),ue&&(null===ue||void 0===ue?void 0:ue.map((function(e,t){return o.a.createElement(u.a,{className:"",key:t},o.a.createElement(m.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Product Name"),o.a.createElement(g.a,{required:!0,selectionLimit:1,isObject:"false",options:w,onSelect:function(e,a){return ve(0,a,t)},onRemove:function(e,a){de(0,a,t)},displayValue:"Product_Title"}))),o.a.createElement(m.a,{className:"mb-1",lg:"1",md:"1",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Qty Assign"),o.a.createElement(E.a,{type:"number",name:"qty",min:0,autoComplete:"off",placeholder:"Req_Qty",value:null===e||void 0===e?void 0:e.qty,onChange:function(e){return se(e,t)}}))),o.a.createElement(m.a,{className:"mb-1",lg:"1",md:"1",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Price"),o.a.createElement(E.a,{type:"number",name:"price",readOnly:!0,placeholder:"Price",value:null===e||void 0===e?void 0:e.price}))),o.a.createElement(m.a,{className:"mb-1",lg:"1",md:"1",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Total Price"),o.a.createElement(E.a,{type:"number",name:"totalprice",readOnly:!0,placeholder:"TtlPrice",value:e.price*(null===e||void 0===e?void 0:e.qty)}))),o.a.createElement(m.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Percentage Increment"),o.a.createElement(E.a,{type:"number",name:"IncrementPercent",placeholder:"Percentage Inrement",value:null===e||void 0===e?void 0:e.IncrementPercent,onChange:function(e){return se(e,t)}}))),o.a.createElement(m.a,{className:"mb-1",lg:"2",md:"2",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Increment Month"),o.a.createElement(b.a,{onChange:function(e){return se(e,t)},type:"select",name:"IncrementMonth",placeholder:"Increment Month",value:null===e||void 0===e?void 0:e.IncrementMonth},o.a.createElement("option",{value:"00"},"--Select--"),o.a.createElement("option",{value:"01"},"January"),o.a.createElement("option",{value:"02"},"February"),o.a.createElement("option",{value:"03"},"March"),o.a.createElement("option",{value:"04"},"April"),o.a.createElement("option",{value:"05"},"May"),o.a.createElement("option",{value:"06"},"June"),o.a.createElement("option",{value:"07"},"July"),o.a.createElement("option",{value:"08"},"August"),o.a.createElement("option",{value:"09"},"September"),o.a.createElement("option",{value:"10"},"October"),o.a.createElement("option",{value:"11"},"November"),o.a.createElement("option",{value:"12"},"December")))),o.a.createElement(m.a,{className:"d-flex mt-1 abb",lg:"3",md:"3",sm:"12"},o.a.createElement("div",{className:"btnStyle"},t?o.a.createElement(s.a,{type:"button",color:"danger",className:"button remove ",onClick:function(){return Ee(t)}},"- Remove"):null),o.a.createElement("div",{className:"btnStyle"},o.a.createElement(s.a,{className:"ml-1 mb-1",color:"primary",type:"button",onClick:function(){return pe()}},"+ Add"))))}))),o.a.createElement(u.a,null,o.a.createElement(m.a,{className:"mb-1",lg:"12",md:"12",sm:"12"},o.a.createElement("div",{className:" d-flex justify-content-end"},o.a.createElement(p.a,{className:"pr-5"},"Grand Total : ",o.a.createElement("strong",null,W))))),o.a.createElement(u.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement(s.a.Ripple,{color:"primary",type:"submit",className:"mt-2"},"Submit")))))))))}}}]);
//# sourceMappingURL=520.9def2b3a.chunk.js.map