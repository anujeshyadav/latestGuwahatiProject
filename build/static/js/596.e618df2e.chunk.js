(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[596],{3166:function(e,t,a){"use strict";a.r(t);var l=a(9),n=a(25),c=a(27),i=a(1),o=a.n(i),r=(a(234),a(85)),u=(a(28),a(912)),d=a(904),s=a(905),m=a(245),v=a(916),b=a(906),p=a(907),E=a(908),y=(a(235),a(136)),f=a.n(y),N=(a(233),a(44)),O=[],j=[],S=[];t.default=function(e){var t=Object(i.useState)(""),a=Object(c.a)(t,2),y=(a[0],a[1]),g=Object(i.useState)(""),h=Object(c.a)(g,2),q=(h[0],h[1],Object(i.useState)("")),z=Object(c.a)(q,2),C=z[0],I=(z[1],Object(i.useState)([])),Q=Object(c.a)(I,2),T=Q[0],D=Q[1],P=Object(i.useState)([]),_=Object(c.a)(P,2),k=_[0],R=_[1],x=Object(i.useState)(""),w=Object(c.a)(x,2),A=w[0],J=w[1],U=Object(i.useState)([]),L=Object(c.a)(U,2),V=L[0],B=L[1],M=Object(i.useState)(0),G=Object(c.a)(M,2),F=G[0],H=G[1],K=Object(i.useState)(0),W=Object(c.a)(K,2),X=(W[0],W[1],Object(i.useState)({})),Y=Object(c.a)(X,2),Z=Y[0],$=Y[1],ee=Object(i.useState)(""),te=Object(c.a)(ee,2),ae=te[0],le=te[1],ne=Object(i.useState)([{productId:"",availableQty:"",qty:1,price:"",totalprice:"",Size:"",unitQty:"",unitType:"",partyId:""}]),ce=Object(c.a)(ne,2),ie=ce[0],oe=ce[1],re=function(e,t,a){y(t),console.log(ie);var l=e.target,c=l.name,i=l.value,o=Object(n.a)(ie);o[t][c]=Number(i);var r=0;o.length>0&&(r=(null===o||void 0===o?void 0:o.map((function(e){return console.log(e.qty*e.price),O[t]=e.Size*e.qty*e.price,o[t].totalprice=e.Size*e.qty*e.price,e.Size*e.qty*e.price}))).reduce((function(e,t){return e+t})));console.log(o),oe(o),H(r)},ue=null===ie||void 0===ie?void 0:ie.reduce((function(e,t){return e+t.totalprice}),0);console.log(ue);Object(i.useEffect)((function(){JSON.parse(localStorage.getItem("userData"))._id;var e=JSON.parse(localStorage.getItem("userData"));Object(N.Nb)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){console.log(null===e||void 0===e?void 0:e.Product),D(null===e||void 0===e?void 0:e.Product)})).catch((function(e){console.log(e)})),Object(N.l)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){var t=null===e||void 0===e?void 0:e.Customer;(null===t||void 0===t?void 0:t.length)&&R(t)})).catch((function(e){console.log(e)})),Object(N.zc)(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.database).then((function(e){console.log(e.Unit),B(e.Unit)})).catch((function(e){console.log(e)}))}),[]),Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));$(e)}),[]);var de=function(){oe([].concat(Object(n.a)(ie),[{productId:"",availableQty:"",qty:1,price:"",totalprice:"",unitQty:"",unitType:""}]))},se=function(e){var t=Object(n.a)(ie);t.splice(e,1),O.splice(e,1);var a=O.reduce((function(e,t){return e+t}),0);H(a),oe(t)},me=function(e,t,a){console.log(e),console.log(a)};return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(u.a,null,o.a.createElement(d.a,{className:"m-2"},o.a.createElement(s.a,{className:""},o.a.createElement("div",null,o.a.createElement("h1",{className:""},"Add Order By Cashbook"))),o.a.createElement(s.a,null,o.a.createElement(r.b,{render:function(e){var t=e.history;return o.a.createElement(m.a,{className:"btn float-right",color:"danger",size:"sm",onClick:function(){return t.push("/app/SoftNumen/parts/Cashbook")}},"Back")}}))),o.a.createElement(v.a,null,o.a.createElement(b.a,{className:"m-1",onSubmit:function(e){e.preventDefault();var t=(null===Z||void 0===Z?void 0:Z.firstName)+" "+(null===Z||void 0===Z?void 0:Z.lastName),a=null===ie||void 0===ie?void 0:ie.map((function(e,t){return{productId:null===e||void 0===e?void 0:e.productId,Size:null===e||void 0===e?void 0:e.Size,qty:null===e||void 0===e?void 0:e.qty,price:null===e||void 0===e?void 0:e.price,unitType:null===e||void 0===e?void 0:e.unitType,status:"ordered"}})),l={userId:null===Z||void 0===Z?void 0:Z._id,fullName:t,address:null===Z||void 0===Z?void 0:Z.currentAddress,status:"Completed",grandTotal:F,MobileNo:null===Z||void 0===Z?void 0:Z.mobileNumber,country:null===Z||void 0===Z?void 0:Z.Country,state:null===Z||void 0===Z?void 0:Z.State,city:null===Z||void 0===Z?void 0:Z.City,orderItems:a,DateofDelivery:ae,partyId:A};console.log(l),C?swal("Error occured while Entering Details"):Object(N.Ab)(l).then((function(e){swal("Order Created Successfully")})).catch((function(e){console.log(e)}))}},o.a.createElement(d.a,null,o.a.createElement(s.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Choose Party"),o.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:k,onSelect:function(e,t){return function(e,t,a){J(null===t||void 0===t?void 0:t._id)}(0,t)},onRemove:me,displayValue:"firstName"}))),o.a.createElement(s.a,{className:"mb-1",lg:"4",md:"4",sm:"12"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Expected Delivery Date"),o.a.createElement(E.a,{required:!0,type:"date",name:"DateofDelivery",value:ae,onChange:function(e){return le(e.target.value)}}))),o.a.createElement(s.a,{className:"mb-1",lg:"4",md:"4",sm:"12"})),ie&&(null===ie||void 0===ie?void 0:ie.map((function(e,t){return o.a.createElement(d.a,{className:"",key:t},console.log(e),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"ProductName"),o.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:T,onSelect:function(e,a){return function(e,t,a){j.push(t),oe((function(e){var c=Object(n.a)(e),i=Object(l.a)({},c[a]);return i.price=null===t||void 0===t?void 0:t.Product_MRP,i.productId=null===t||void 0===t?void 0:t._id,i.unitType=null===t||void 0===t?void 0:t.unitType,i.availableQty=null===t||void 0===t?void 0:t.Size,c[a]=i,c}))}(0,a,t)},onRemove:function(e,a){me(e,0,t)},displayValue:"Product_Title"}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Available Size"),o.a.createElement(E.a,{type:"number",disabled:!0,name:"availableQty",placeholder:"AvailableSize",value:null===e||void 0===e?void 0:e.availableQty}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Required Size"),o.a.createElement(E.a,{type:"number",name:"qty",min:0,placeholder:"Req_Qty",required:!0,autocomplete:"off",value:null===e||void 0===e?void 0:e.qty,onChange:function(a){return re(a,t,null===e||void 0===e||e.availableQty)}}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Choose Unit"),o.a.createElement(f.a,{required:!0,selectionLimit:1,isObject:"false",options:V,onSelect:function(e,a){return function(e,t,a){S.push(t),oe((function(e){var c=Object(n.a)(e),i=Object(l.a)({},c[a]);i.Size=null===t||void 0===t?void 0:t.unitQty,i.unitType=t.primaryUnit,c[a]=i;var o=(null===e||void 0===e?void 0:e.map((function(e,t){var l,n;c[a].totalprice=(null===e||void 0===e?void 0:e.qty)*e.price*(null===(l=S[t])||void 0===l?void 0:l.unitQty);var i=(null===e||void 0===e?void 0:e.price)*e.qty*(null===(n=S[t])||void 0===n?void 0:n.unitQty);return O[a]=i,i}))).reduce((function(e,t){return e+t}));return console.log(o),H(o),c}))}(0,a,t)},onRemove:function(e,a){me(e,0,t)},displayValue:"primaryUnit"}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Price"),o.a.createElement(E.a,{type:"number",name:"price",disabled:!0,placeholder:"Price",value:e.price}))),o.a.createElement(s.a,{className:"mb-1"},o.a.createElement("div",{className:""},o.a.createElement(p.a,null,"Total Price"),o.a.createElement(E.a,{type:"number",name:"totalprice",disabled:!0,placeholder:"TtlPrice",value:e.Size*e.price*e.qty}))),o.a.createElement(s.a,{className:"d-flex mt-1 abb"},o.a.createElement("div",{className:"btnStyle"},t?o.a.createElement(m.a,{type:"button",color:"danger",className:"button remove ",size:"sm",onClick:function(){return se(t)}},"-"):null),o.a.createElement("div",{className:"btnStyle"},o.a.createElement(m.a,{className:"ml-1 mb-1",color:"primary",type:"button",size:"sm",onClick:function(){return de()}},"+"))))}))),o.a.createElement(d.a,null,o.a.createElement(s.a,{className:"mb-1",lg:"12",md:"12",sm:"12"},o.a.createElement("div",{className:" d-flex justify-content-end"},o.a.createElement("ul",{className:"subtotal"},o.a.createElement("li",null,o.a.createElement(p.a,{className:"pr-5"},"Grand Total:",o.a.createElement("span",{className:"p-2"},F&&"NaN"==F?0:F))))))),o.a.createElement(d.a,null,o.a.createElement(s.a,null,o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement(m.a.Ripple,{color:"primary",type:"submit",className:"mt-2"},"Submit")))))))))}}}]);
//# sourceMappingURL=596.e618df2e.chunk.js.map